<p>conditions-table works!</p>
<section class="conditions-table-component">
    <div class="conditions-header-container">
      <span class="title">{{ 'home.new-experiment.design.condition.text' | translate }}</span>
      <button
        type="button"
        mat-flat-button
        color="primary"
        class="ft-14-600 toggle-button"
        (click)="handleHideClick()"
        [disabled]="isAliasTableEditMode$ | async"
      >
        <mat-icon class="icon icon-bump-left">expand_less</mat-icon>
        <span class="toggle-text">{{ 'home.new-experiment.design.toggle-actions.factors' | translate }}</span>
      </button>
    </div>

    <div class="conditions-weight-checkbox">
      <mat-checkbox
          class="ft-13-700"
          color="primary"
          [checked]="equalWeightFlag"
          (change)="changeEqualWeightFlag($event)"
        >
          {{ 'home.new-experiment.design.equal-assignment-weights.text' | translate }}
        </mat-checkbox>
    </div>

    <mat-table [dataSource]="aliasTableData$" class="conditions-table">
      <!-- Factors Column -->
      <ng-container *ngFor="let disCol of factorsDisplayedColumns; let colIndex = index" matColumnDef="{{disCol}}">
        <mat-header-cell *matHeaderCellDef class="ft-14-700">
          {{ disCol }}
        </mat-header-cell>
        <mat-cell *matCellDef="let rowData">
          <span [matTooltip]="rowData.condition" matTooltipPosition="above">
            {{ rowData.condition | truncate: 15 }}
          </span>
        </mat-cell>
      </ng-container>
  
      <!-- Alias Column -->
      <ng-container matColumnDef="alias">
        <mat-header-cell *matHeaderCellDef class="ft-14-700">
          {{ 'home.new-experiment.design.condition.column-header.alias.text' | translate }}
        </mat-header-cell>
        <mat-cell *matCellDef="let rowData">
          <ng-container *ngIf="!rowData.isEditing">
            <span [matTooltip]="rowData.alias" matTooltipPosition="above">
              {{ rowData.alias | truncate: 15 }}
            </span>
          </ng-container>
          <ng-container *ngIf="rowData.isEditing">
            <mat-form-field floatLabel="never">
              <input
                [type]="text"
                matInput
                [(ngModel)]="rowData.alias"
                [placeholder]="'home.new-experiment.design.condition.column-header.alias.text' | translate"
                required
                [matAutocomplete]="aliasRowAutoCompleteConditionCodes"
                (keyup)="handleFilterContextMetaDataConditions(rowData.alias, $event)"
              />
              <mat-autocomplete #aliasRowAutoCompleteConditionCodes="matAutocomplete" panelWidth="fit-content">
                <mat-option
                  *ngFor="let conditionCode of filteredContextMetaDataConditions$ | async"
                  [value]="conditionCode"
                >
                  {{ conditionCode }}
                </mat-option>
              </mat-autocomplete>
            </mat-form-field>
          </ng-container>
        </mat-cell>
      </ng-container>

      <!-- Weight Column -->
      <ng-container matColumnDef="weight">
        <mat-header-cell *matHeaderCellDef class="ft-14-700">
          {{ 'home.new-experiment.design.condition.column-header.weight.text' | translate }}
        </mat-header-cell>
        <mat-cell *matCellDef="let rowData">
          <ng-container *ngIf="!rowData.isEditing">
            <span [matTooltip]="rowData.alias" matTooltipPosition="above">
              {{ rowData.alias | truncate: 15 }}
            </span>
          </ng-container>
          <ng-container *ngIf="rowData.isEditing">
            <mat-form-field floatLabel="never">
              <input
                [type]="text"
                matInput
                [(ngModel)]="rowData.alias"
                [placeholder]="'home.new-experiment.design.assignment-weight.placeholder.text' | translate"
                required
              />
            </mat-form-field>
          </ng-container>
        </mat-cell>
      </ng-container>
  
      <!-- Include Column -->
      <ng-container matColumnDef="include">
        <mat-header-cell *matHeaderCellDef class="ft-14-700">
          {{ 'home.new-experiment.design.condition.column-header.include.text' | translate }}
        </mat-header-cell>
        <mat-cell *matCellDef="let rowData;let index">
          <ng-container *ngIf="!rowData.isEditing">
            <mat-checkbox class="ft-8-100 include-checkbox" color="primary"> </mat-checkbox>
          </ng-container>
          <ng-container *ngIf="rowData.isEditing">
            <mat-form-field floatLabel="never">
              <input
                [type]="text"
                matInput
                [(ngModel)]="rowData.alias"
                [placeholder]="'home.new-experiment.design.condition.column-header.include.text' | translate"
                required
                [matAutocomplete]="aliasRowAutoCompleteConditionCodes"
                (keyup)="handleFilterContextMetaDataConditions(rowData.alias, $event)"
              />
              <mat-autocomplete #aliasRowAutoCompleteConditionCodes="matAutocomplete" panelWidth="fit-content">
                <mat-option
                  *ngFor="let conditionCode of filteredContextMetaDataConditions$ | async"
                  [value]="conditionCode"
                >
                  {{ conditionCode }}
                </mat-option>
              </mat-autocomplete>
            </mat-form-field>
          </ng-container>
        </mat-cell>
      </ng-container>
  
      <!-- Actions Column -->
      <ng-container matColumnDef="actions">
        <mat-header-cell *matHeaderCellDef class="ft-14-700"></mat-header-cell>
        <mat-cell
          *matCellDef="let rowData; let rowIndex = index"
          class="actions-cell"
          style="justify-content: flex-start"
        >
          <button
            type="button"
            class="row-action-btn"
            (click)="handleEditClick(rowData, rowIndex)"
            [disabled]="(isAliasTableEditMode$ | async) && (aliasTableEditIndex$ | async) != rowIndex"
          >
            <ng-container *ngIf="!rowData.isEditing">
              <mat-icon class="icon">create</mat-icon>
            </ng-container>
            <ng-container *ngIf="rowData.isEditing">
              <mat-icon class="icon">done</mat-icon>
            </ng-container>
          </button>
        </mat-cell>
      </ng-container>
  
      <mat-header-row *matHeaderRowDef="conditionDisplayedColumns"></mat-header-row>
      <mat-row *matRowDef="let row; columns: conditionDisplayedColumns"></mat-row>
    </mat-table>
</section>
  