<section class="aliases-table-component">
  <div class="aliases-header-container">
    <span class="ft-18-700">{{ 'home.new-experiment.design.aliases.header.text' | translate }}</span>
    <button
      type="button"
      mat-flat-button
      color="primary"
      class="ft-14-600"
      (click)="handleHideClick()"
      [disabled]="(isAliasTableEditMode$ | async)"
    >
      <mat-icon class="icon icon-bump-left">expand_less</mat-icon>
      <span>{{ 'home.new-experiment.design.toggle-actions.conditions' | translate }}</span>
    </button>
  </div>

  <mat-table
    [dataSource]="aliasTableData$"
    class="alias-table"
  >
  
    <!-- Site Column -->
    <ng-container matColumnDef="site">
      <mat-header-cell *matHeaderCellDef class="ft-14-700">
        {{ "home.new-experiment.design.aliases.column-header.site.text" | translate }}
      </mat-header-cell>
      <mat-cell *matCellDef="let rowData">
        <span [matTooltip]="rowData.site" matTooltipPosition="above">
          {{rowData.site | truncate: 15 }}
        </span>
      </mat-cell>
    </ng-container>
  
    <!-- Target Column -->
    <ng-container matColumnDef="target">
      <mat-header-cell *matHeaderCellDef class="ft-14-700">
        {{ "home.new-experiment.design.aliases.column-header.target.text" | translate }}
      </mat-header-cell>
      <mat-cell *matCellDef="let rowData">
        <span [matTooltip]="rowData.target" matTooltipPosition="above">
          {{rowData.target | truncate: 15 }}
        </span>
      </mat-cell>
    </ng-container>
  
    <!-- Condition Column -->
    <ng-container matColumnDef="condition">
      <mat-header-cell *matHeaderCellDef class="ft-14-700">
        {{ "home.new-experiment.design.aliases.column-header.condition.text" | translate }}
      </mat-header-cell>
      <mat-cell *matCellDef="let rowData">
        <span [matTooltip]="rowData.condition" matTooltipPosition="above">
          {{rowData.condition | truncate: 15 }}
        </span>
      </mat-cell>
    </ng-container>
  
    <!-- Alias Column -->
    <ng-container matColumnDef="alias">
      <mat-header-cell *matHeaderCellDef class="ft-14-700">
        {{ "home.new-experiment.design.aliases.column-header.alias.text" | translate }}
      </mat-header-cell>
      <mat-cell *matCellDef="let rowData">
        <ng-container *ngIf="!rowData.isEditing">
          <span [matTooltip]="rowData.alias" matTooltipPosition="above">
            {{ rowData.alias | truncate: 15 }}
          </span>
        </ng-container>
        <ng-container *ngIf="rowData.isEditing">
          <mat-form-field floatLabel="never">
            <input
              [type]="text" 
              matInput
              [(ngModel)]="rowData.alias"
              [placeholder]="rowData.condition"
              required
            >
          </mat-form-field>
        </ng-container>
      </mat-cell>
    </ng-container>

    <!-- Actions Column -->
    <ng-container matColumnDef="actions">
      <mat-header-cell *matHeaderCellDef class="ft-14-700"></mat-header-cell>
      <mat-cell *matCellDef="let rowData" class="actions-cell">
          <button
            type="button"
            class="row-action-btn"
            (click)="handleEditClick(rowData)"
          >
            <ng-container *ngIf="!rowData.isEditing">
              <mat-icon class="icon">create</mat-icon>
            </ng-container>
            <ng-container *ngIf="rowData.isEditing">
              <mat-icon class="icon">done</mat-icon>
            </ng-container>
          </button>
      </mat-cell>
    </ng-container>
  
    <mat-header-row *matHeaderRowDef="aliasesDisplayedColumns"></mat-header-row>
    <mat-row *matRowDef="let row; columns: aliasesDisplayedColumns;"></mat-row> 
  </mat-table>
</section>
